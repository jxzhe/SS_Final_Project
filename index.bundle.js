!function(t){function e(e){for(var i,o,n=e[0],h=e[1],l=e[2],d=0,c=[];d<n.length;d++)o=n[d],s[o]&&c.push(s[o][0]),s[o]=0;for(i in h)Object.prototype.hasOwnProperty.call(h,i)&&(t[i]=h[i]);for(y&&y(e);c.length;)c.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],i=!0,n=1;n<a.length;n++){var h=a[n];0!==s[h]&&(i=!1)}i&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var i={},s={1:0},r=[];function o(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=i,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(a,i,function(e){return t[e]}.bind(null,i));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var n=window.webpackJsonp=window.webpackJsonp||[],h=n.push.bind(n);n.push=e,n=n.slice();for(var l=0;l<n.length;l++)e(n[l]);var y=h;r.push([348,0]),a()}({128:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}();var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Phaser.State),i(e,[{key:"create",value:function(){}}]),e}();e.default=s},129:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}();var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Phaser.State),i(e,[{key:"create",value:function(){}}]),e}();e.default=s},130:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}();var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Phaser.State),i(e,[{key:"create",value:function(){this.create_layer_0(),this.create_sign_layer(),this.create_layer_1(),this.create_layer_2(),this.create_layer_3(),this.create_map(),this.create_main_layer(),this.create_layer_4(),this.create_enemy_layer(),this.create_minimap_layer(),this.create_board_layer(),this.audio={melo00:this.add.audio("melo00"),melo01:this.add.audio("melo01"),melo02:this.add.audio("melo02"),melo03:this.add.audio("melo03")},this.counter={combo:0,lastType:""},this.tween_down=this.add.tween(this.player).to({angle:180},250),this.tween_up=this.add.tween(this.player).to({angle:0},250),this.destroy_emitter=this.add.group(),this.stage.backgroundColor="#ffffff"}},{key:"create_layer_0",value:function(){this.layer_0=this.add.image(0,0,"Map02_Layer0"),this.layer_0.fixedToCamera=!0}},{key:"create_sign_layer",value:function(){this.sign_layer=this.add.group()}},{key:"create_layer_1",value:function(){this.layer_1=this.add.group(),this.layer_1.create(-99999,800,"Map02_Layer1"),this.layer_1.create(-99999,800,"Map02_Layer1"),this.layer_1.forEach(function(t){t.animations.add("active",[0,1],5,!0),t.animations.play("active")}),this.layer_1.setAll("scale.x",2),this.layer_1.setAll("scale.y",2),this.layer_1.setAll("alpha",.55)}},{key:"create_layer_2",value:function(){this.layer_2=this.add.group(),this.layer_2.create(-99999,800,"Map02_Layer2"),this.layer_2.create(-99999,800,"Map02_Layer2"),this.layer_2.forEach(function(t){t.animations.add("active",[0,1],5,!0),t.animations.play("active")}),this.layer_2.setAll("alpha",.65)}},{key:"create_layer_3",value:function(){this.layer_3=this.add.group(),this.layer_3.create(-99999,800,"Map02_Layer3"),this.layer_3.create(-99999,800,"Map02_Layer3"),this.layer_3.forEach(function(t){t.animations.add("active",[0,1],5,!0),t.animations.play("active")}),this.layer_3.setAll("alpha",.75)}},{key:"create_map",value:function(){this.map=this.add.tilemap("map"),this.map.addTilesetImage("tileset"),this.map_layer=this.map.createLayer("Layer 1"),this.map_layer.resizeWorld(),this.map.setCollisionBetween(1,76)}},{key:"create_main_layer",value:function(){var t=this;this.main_layer=this.add.group(),this.gravity_0=this.add.sprite(1100,1100,"Gravity00"),this.gravity_1=this.add.sprite(1300,1300,"Gravity01"),this.physics.arcade.enable(this.gravity_0),this.physics.arcade.enable(this.gravity_1),this.gravity_0.anchor.set(.5),this.gravity_1.anchor.set(.5),this.gravity_0.body.setCircle(16),this.gravity_1.body.setCircle(16),this.gravity_0.body.immovable=!0,this.gravity_1.body.immovable=!0,this.gravity_0.animations.add("active",[0,1,2,3,4,5],10,!0),this.gravity_1.animations.add("active",[0,1,2,3,4,5],10,!0),this.mouse_drag=this.add.sprite(0,0,"Mouse_Drag"),this.mouse_drag.anchor.set(.5),this.mouse_drag.scale.set(.5),this.mouse_drag.animations.add("fire",[0,1,2,3,4,5],15,!1),this.mouse_drag.frame=0,this.mouse_drag.alpha=0,this.init_pos=[{x:11,y:22},{x:203,y:7},{x:208,y:172},{x:3,y:168},{x:3,y:168}];var e=Math.floor(4*Math.random());this.player=this.add.sprite(45*this.init_pos[e].x,45*this.init_pos[e].y,"Player00"),this.physics.arcade.enable(this.player),this.player.is_touching=!1,this.player.body.bounce.set(.3),this.player.anchor.set(.5),this.player.angle=0,this.player.body.gravity.y=300,this.player.animations.add("leftwalk",[13,14,15,16,17,18],8,!0),this.player.animations.add("rightwalk",[19,20,21,22,23,24],8,!0),this.player.animations.add("leftjump",[1,2,3,4,5,6],10,!0),this.player.animations.add("rightjump",[7,8,9,10,11,12],10,!0),this.player.animations.add("leftrun",[25,26,27,28,29,30],8,!0),this.player.animations.add("rightrun",[31,32,33,34,35,36],8,!0),this.player.inputEnabled=!0,this.player.events.onInputDown.add(function(e,a){t.game.mouse.is_down||(t.game.mouse.is_down=!0,t.game.mouse.x=a.x,t.game.mouse.y=a.y,e.body.velocity.x=0,e.body.velocity.y=0,t.mouse_drag.alpha=1,t.player.body.gravity.y=t.player.body.gravity.y>0?25:-25)},this),this.player.events.onInputUp.add(function(e,a){t.game.total_life-=1,t.game.mouse.is_down=!1,t.game.time_angle=0,t.game.last_time=t.time.now;var i=t.game.mouse.x-a.x,s=t.game.mouse.y-a.y;e.body.velocity.x=i>0?Math.min(1e3,5*i):Math.max(-1e3,5*i),e.body.velocity.y=s>0?Math.min(1e3,5*s):Math.max(-1e3,5*s),t.mouse_drag.animations.play("fire").onComplete.add(function(){t.mouse_drag.frame=0,t.mouse_drag.alpha=0}),t.player.body.gravity.y=t.player.body.gravity.y>0?300:-300},this),this.camera.follow(this.player,Phaser.Camera.FOLLOW_LOCKON,.1,.1),this.main_layer.addMultiple([this.mouse_drag,this.player,this.gravity_0,this.gravity_1])}},{key:"create_layer_4",value:function(){this.layer_4=this.add.group(),this.layer_4.create(-99999,800,"Map02_Layer4"),this.layer_4.create(-99999,800,"Map02_Layer4"),this.layer_4.forEach(function(t){t.animations.add("active",[0,1],5,!0),t.animations.play("active")}),this.layer_4.setAll("alpha",.85),this.layer_4.setAll("scale.y",-1)}},{key:"create_enemy_layer",value:function(){this.enemy_layer=this.add.physicsGroup(Phaser.Physics.ARCADE);for(var t=0;t<4;++t)for(var e=0;e<10*this.game.total_enemies;++e){var a=this.enemy_layer.create(9900*Math.random(),8100*Math.random(),"Enemy0"+t);a.anchor.set(.5),a.scale.set(1.2),a.angle=180*Math.random()}this.enemy_layer.setAll("body.gravity.y",300)}},{key:"create_minimap_layer",value:function(){this.minimap=this.add.image(0,0,"Minimap_02"),this.minimap.alpha=.6,this.minimap.mask=this.add.graphics(0,0),this.minimap.mask.beginFill(),this.minimap.mask.drawRoundedRect(0,0,310,310,9),this.dot=this.add.image(0,0,"favicon"),this.dot.anchor.set(.5),this.minimap_layer=this.add.group(),this.minimap_layer.addMultiple([this.minimap,this.minimap.mask,this.dot])}},{key:"create_board_layer",value:function(){this.board_layer=this.add.group(),this.board={Enemy00Ratio:{cover:this.add.sprite(.4*this.game.width,.075*this.game.height,"Enemy00"),text:this.add.text(.45*this.game.width,.05*this.game.height,"0%"),bar_back:this.add.sprite(.425*this.game.width,.075*this.game.height,"Percentage_Back"),bar_front:this.add.sprite(.425*this.game.width,.075*this.game.height,"Percentage_Front"),mask:this.add.graphics(.425*this.game.width,.075*this.game.height),total_clear:0},Enemy01Ratio:{cover:this.add.sprite(.7*this.game.width,.075*this.game.height,"Enemy01"),text:this.add.text(.75*this.game.width,.05*this.game.height,"0%"),bar_back:this.add.sprite(.725*this.game.width,.075*this.game.height,"Percentage_Back"),bar_front:this.add.sprite(.725*this.game.width,.075*this.game.height,"Percentage_Front"),mask:this.add.graphics(.725*this.game.width,.075*this.game.height),total_clear:0},Enemy02Ratio:{cover:this.add.sprite(.45*this.game.width,.145*this.game.height,"Enemy02"),text:this.add.text(.5*this.game.width,.12*this.game.height,"0%"),bar_back:this.add.sprite(.475*this.game.width,.145*this.game.height,"Percentage_Back"),bar_front:this.add.sprite(.475*this.game.width,.145*this.game.height,"Percentage_Front"),mask:this.add.graphics(.475*this.game.width,.145*this.game.height),total_clear:0},Enemy03Ratio:{cover:this.add.sprite(.75*this.game.width,.145*this.game.height,"Enemy03"),text:this.add.text(.8*this.game.width,.12*this.game.height,"0%"),bar_back:this.add.sprite(.775*this.game.width,.145*this.game.height,"Percentage_Back"),bar_front:this.add.sprite(.775*this.game.width,.145*this.game.height,"Percentage_Front"),mask:this.add.graphics(.775*this.game.width,.145*this.game.height),total_clear:0}};for(var t=0;t<this.game.settings.total_enemy_types;++t)this.board["Enemy0"+t+"Ratio"].cover.anchor.set(.5),this.board["Enemy0"+t+"Ratio"].text.anchor.set(.5),this.board["Enemy0"+t+"Ratio"].text.fontSize=20,this.board["Enemy0"+t+"Ratio"].text.fill="#fff",this.board["Enemy0"+t+"Ratio"].bar_back.anchor.set(0,.5),this.board["Enemy0"+t+"Ratio"].bar_front.anchor.set(0,.5),this.board["Enemy0"+t+"Ratio"].mask.anchor.set(0,.5),this.board["Enemy0"+t+"Ratio"].mask.beginFill(16777215),this.board["Enemy0"+t+"Ratio"].mask.drawRect(0,-20,150,40),this.board["Enemy0"+t+"Ratio"].bar_front.mask=this.board["Enemy0"+t+"Ratio"].mask,this.board_layer.addMultiple([this.board["Enemy0"+t+"Ratio"].cover,this.board["Enemy0"+t+"Ratio"].text,this.board["Enemy0"+t+"Ratio"].bar_back,this.board["Enemy0"+t+"Ratio"].bar_front,this.board["Enemy0"+t+"Ratio"].mask]);this.board.Enemy00Ratio.cover.animations.add("kill",[1,2,3,4,5],8,!1),this.board.Enemy01Ratio.cover.animations.add("kill",[0,1,2,3],8,!1),this.board.Enemy02Ratio.cover.animations.add("kill",[0,1,2,3,4],8,!1),this.board.Enemy03Ratio.cover.animations.add("kill",[0,1,2,3,4,5],8,!1),this.life_icon=this.add.image(.045*this.game.width,.035*this.game.height,"LifeIcon"),this.life_icon.anchor.set(.5),this.life_text=this.add.text(.12*this.game.width,.035*this.game.height,"x"+this.game.total_life),this.life_text.anchor.set(.5),this.board_layer.addMultiple([this.life_icon,this.life_text]),this.board_layer.setAll("fixedToCamera",!0)}},{key:"update",value:function(){var t=this.time.now,e=!0,a=!1,i=void 0;try{for(var s,r=this.enemy_layer.children[Symbol.iterator]();!(e=(s=r.next()).done);e=!0){var o=s.value;this.board["Enemy"+o.key.substring(5,7)+"Ratio"].total_clear>=this.game.total_enemies?this.physics.arcade.collide(this.player,o,this.handle_obstacle_hit.bind(this)):this.physics.arcade.overlap(this.player,o,this.handle_enemy_hit.bind(this))}}catch(t){a=!0,i=t}finally{try{!e&&r.return&&r.return()}finally{if(a)throw i}}this.physics.arcade.collide(this.player,[this.main_layer],this.handle_gravity.bind(this)),this.physics.arcade.collide(this.player,[this.map_layer,this.map],this.handle_gravity.bind(this)),this.physics.arcade.collide(this.enemy_layer,[this.map_layer,this.map]),this.physics.arcade.collide(this.enemy_layer);var n=this.math.angleBetween(this.input.activePointer.x,this.input.activePointer.y,this.player.body.position.x+this.player.offsetX-this.camera.x,this.player.body.position.y+this.player.offsetY-this.camera.y),h=Math.min(30,.25*this.math.distance(this.input.activePointer.x,this.input.activePointer.y,this.player.body.position.x+this.player.offsetX-this.camera.x,this.player.body.position.y+this.player.offsetY-this.camera.y));this.game.mouse.is_down&&this.input.activePointer.isDown&&(this.game.mouse.x<this.input.activePointer.x?this.player.animations.play(this.player.body.gravity.y<0?"rightjump":"leftjump"):this.player.animations.play(this.player.body.gravity.y<0?"leftjump":"rightjump"),this.mouse_drag.x=this.player.body.position.x+this.player.offsetX-Math.cos(n)*h*1.8,this.mouse_drag.y=this.player.body.position.y+this.player.offsetY-Math.sin(n)*h*1.8,this.mouse_drag.scale.set(.5*h*.1,Math.max(.05*h*.5,.5)),this.mouse_drag.rotation=n),this.game.mouse.is_down||(this.game.time_angle=this.game.time_angle>90?90:this.game.time_angle+5e-5*(this.game.last_time-t),this.game.last_time=t),this.player.body.velocity.x<8&&this.player.body.velocity.x>-8&&(this.player.body.velocity.x=0),this.player.body.velocity.x<0?(this.player.animations.play(this.player.body.gravity.y<0?"rightrun":"leftrun"),this.dot.scale.x=-1):this.player.body.velocity.x>0?(this.player.animations.play(this.player.body.gravity.y<0?"leftrun":"rightrun"),this.dot.scale.x=1):this.game.mouse.is_down||(this.player.frame=0,this.player.animations.stop()),this.player.body.gravity.y<0?(this.gravity_1.animations.play("active"),this.gravity_0.frame=0,this.gravity_0.animations.stop(),0==this.player.angle&&this.tween_down.start()):(this.gravity_0.animations.play("active"),this.gravity_1.frame=0,this.gravity_1.animations.stop(),0!=this.player.angle&&this.tween_up.start());for(var l=1;l<=4;++l)-99999===this["layer_"+l].getChildAt(0).x&&(this["layer_"+l].getChildAt(0).x=this.camera.x);-99999===this.layer_1.getChildAt(1).x&&(this.layer_1.getChildAt(1).x=this.camera.x+1900);for(var y=2;y<=4;++y)-99999===this["layer_"+y].getChildAt(1).x&&(this["layer_"+y].getChildAt(1).x=this.camera.x+950);var d=!0,c=!1,m=void 0;try{for(var _,g=this.layer_1.children[Symbol.iterator]();!(d=(_=g.next()).done);d=!0){var p=_.value;p.x-=5e-4*this.player.body.velocity.x,p.x<this.camera.x-1900?p.x=this.camera.x+1900:p.x>this.camera.x+1900&&(p.x=this.camera.x-1900),p.y=this.camera.y-793}}catch(t){c=!0,m=t}finally{try{!d&&g.return&&g.return()}finally{if(c)throw m}}var u=!0,b=!1,f=void 0;try{for(var v,x=this.layer_2.children[Symbol.iterator]();!(u=(v=x.next()).done);u=!0){var w=v.value;w.x-=.001*this.player.body.velocity.x,w.x<this.camera.x-950?w.x=this.camera.x+950:w.x>this.camera.x+950&&(w.x=this.camera.x-950),w.y=this.camera.y}}catch(t){b=!0,f=t}finally{try{!u&&x.return&&x.return()}finally{if(b)throw f}}var k=!0,P=!1,E=void 0;try{for(var M,O=this.layer_3.children[Symbol.iterator]();!(k=(M=O.next()).done);k=!0){var R=M.value;R.x-=.005*this.player.body.velocity.x,R.x<this.camera.x-950?R.x=this.camera.x+950:R.x>this.camera.x+950&&(R.x=this.camera.x-950),R.y=this.camera.y}}catch(t){P=!0,E=t}finally{try{!k&&O.return&&O.return()}finally{if(P)throw E}}var j=!0,S=!1,L=void 0;try{for(var B,T=this.layer_4.children[Symbol.iterator]();!(j=(B=T.next()).done);j=!0){var G=B.value;G.x-=.01*this.player.body.velocity.x,G.x<this.camera.x-950?G.x=this.camera.x+950:G.x>this.camera.x+950&&(G.x=this.camera.x-950),G.y=this.camera.y+770}}catch(t){S=!0,L=t}finally{try{!j&&T.return&&T.return()}finally{if(S)throw L}}this.minimap_layer.x=this.camera.x+5,this.minimap_layer.y=this.camera.y+5;var C=-this.player.x/9900*930+160,H=-this.player.y/9900*930+160;this.minimap.x=C>0?0:C<-620?-620:C,this.minimap.y=H>0?0:H<-451?-451:H,this.dot.x=C>0?160-C:C<-620?-460-C:160,this.dot.y=H>0?160-H:H<-451?-291-H:160;for(var A=0;A<this.game.settings.total_enemy_types;++A){var F=Math.min(this.board["Enemy0"+A+"Ratio"].total_clear,this.game.total_enemies)/this.game.total_enemies;this.board["Enemy0"+A+"Ratio"].text.text=Math.round(100*F)+"%",this.board["Enemy0"+A+"Ratio"].text.x=this.board["Enemy0"+A+"Ratio"].cover.x+32.5+150*F,this.board["Enemy0"+A+"Ratio"].mask.scale.set(F,1)}this.life_text.text="x"+this.game.total_life,this.player.body.touching.none&&(this.player.is_touching=!1)}},{key:"handle_gravity",value:function(t,e){"Gravity00"==e.key?(t.body.gravity.y=300,this.enemy_layer.setAll("body.gravity.y",300),this.m_Tween&&this.tweens.remove(this.m_Tween)):"Gravity01"==e.key&&(t.body.gravity.y=-300,this.enemy_layer.setAll("body.gravity.y",-300),this.m_Tween&&this.tweens.remove(this.m_Tween))}},{key:"handle_enemy_hit",value:function(t,e){var a=this;e.body.enable=!1,this.board[e.key+"Ratio"].cover.animations.play("kill");var i=this.add.tween(e.scale).to({x:1.75,y:1.75},175).start();i.onComplete.add(function(){a.counter.lastType==e.key?(a.counter.combo+=1,a.audio["melo0"+a.counter.combo%3].play()):(a.counter.combo=1,a.counter.lastType=e.key,a.audio.melo00.play()),a.tweens.remove(i);var t=a.counter.combo/5,s=a.add.emitter(e.x,e.y,t);s.gravity=0,s.makeParticles("Particle"+e.key.substring(5,7)),s.setXSpeed(-150,150),s.setYSpeed(-150,150),s.setScale(1,.5,1,.5,800),s.start(!0,800,null,t),a.destroy_emitter.add(s),a.enemy_layer.remove(e),e.destroy(),setTimeout(function(){s.forEach(function(t){var i=a.add.tween(t).to({x:a.board["Enemy"+e.key.substring(5,7)+"Ratio"].cover.x,y:a.board["Enemy"+e.key.substring(5,7)+"Ratio"].cover.y},400).start();i.onComplete.add(function(){a.tweens.remove(i)})})},200),setTimeout(function(){a.destroy_emitter.remove(s),s.destroy()},600)},this),this.board["Enemy"+e.key.substring(5,7)+"Ratio"].total_clear+=1,this.board["Enemy"+e.key.substring(5,7)+"Ratio"].total_clear>this.game.total_enemies-1&&this.enemy_layer.forEach(function(t){t.key===e.key&&(t.body.immovable=!0,t.body.moves=!1)})}},{key:"handle_obstacle_hit",value:function(t,e){t.is_touching||(this.game.total_life-=2,t.is_touching=!0),this.game.total_life<.1&&this.state.start("Over")}}]),e}();e.default=s},131:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}();var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Phaser.State),i(e,[{key:"create",value:function(){this.create_layers(),this.init_sign_layer(),this.init_obstacle_layer(),this.init_enemy_layer(),this.init_front_layer(),this.init_target_layer(),this.init_border_layer(),this.init_main_layer(),this.init_board(),this.audio={melo00:this.add.audio("melo00"),melo01:this.add.audio("melo01"),melo02:this.add.audio("melo02"),melo03:this.add.audio("melo03")},this.counter={combo:0,lastType:""},this.tween_down=this.add.tween(this.player).to({angle:180},250),this.tween_up=this.add.tween(this.player).to({angle:0},250),this.destroy_emitter=this.add.group(),this.boss.move_effect=null,this.boss.last_time=0,this.is_boss_state=!1,this.bullets=[]}},{key:"create_layers",value:function(){this.back_layer_2=this.add.group(),this.back_layer_1=this.add.group(),this.back_layer_0=this.add.group(),this.enemy_layer=this.add.physicsGroup(Phaser.Physics.ARCADE),this.bullet_layer=this.add.group(),this.obstacle_layer=this.add.group(),this.sign_layer=this.add.group(),this.border_layer=this.add.group(),this.main_layer=this.add.group(),this.boss_layer=this.add.group(),this.front_layer=this.add.group(),this.target_layer=this.add.group()}},{key:"init_sign_layer",value:function(){this.sign_layer_pos=[800,900],this.boss_gate={back:this.add.sprite(963,585,"Boss_Gate03"),down:this.add.sprite(900,500,"Boss_Gate02"),up:this.add.sprite(900,500,"Boss_Gate01"),door:this.add.sprite(900,500,"Boss_Gate00"),front:this.add.sprite(900,500,"Boss_Gate04"),valid:!1},this.physics.arcade.enable(this.boss_gate.door),this.boss_gate.door.body.setSize(46,63,34,52),this.boss_gate.back.anchor.set(.5),this.boss_gate.back.mask=this.add.graphics(963,585),this.boss_gate.back.mask.anchor.set(.5),this.boss_gate.back.mask.beginFill(0),this.boss_gate.back.mask.drawRect(-42.5,-52.5,85,105),this.boss_gate.up.mask=this.add.graphics(900,500),this.boss_gate.up.mask.beginFill(0),this.boss_gate.up.mask.drawRect(23,39,82,71),this.boss_gate.down.mask=this.add.graphics(900,500),this.boss_gate.down.mask.beginFill(0),this.boss_gate.down.mask.drawRect(13,77,102,71),this.boss_gate.front.visible=!1,this.boss_gate.front_effect=this.add.tween(this.boss_gate.front).to({alpha:.3},750).yoyo(!0).loop(),this.boss_gate.up_effect=this.add.tween(this.boss_gate.up).to({y:400},1500),this.boss_gate.down_effect=this.add.tween(this.boss_gate.down).to({y:700},1500),this.boss_gate.back_effect=this.add.tween(this.boss_gate.back).to({angle:360},4e3).loop(),this.boss_gate_sign_bloom=this.add.sprite(800,this.game.settings.border_bottom_offset_y-18,"Boss_Gate_Sign01"),this.boss_gate_sign_bloom.anchor.set(.5),this.boss_gate_sign_bloom.alpha=.7,this.boss_gate_sign_bloom.frame=2,this.boss_gate_sign_bloom.bloom_effect=this.add.tween(this.boss_gate_sign_bloom).to({alpha:.1},750).yoyo(!0).loop().start(),this.boss_gate_sign=this.add.sprite(800,this.game.settings.border_bottom_offset_y-18,"Boss_Gate_Sign01"),this.physics.arcade.enable(this.boss_gate_sign),this.boss_gate_sign.body.immovable=!0,this.boss_gate_sign.anchor.set(.5),this.boss_gate_sign00=this.add.sprite(800,this.game.settings.border_bottom_offset_y-60,"Boss_Gate_Sign00"),this.boss_gate_sign00.anchor.set(.5),this.boss_gate_sign00.animations.add("default",[0,1,2],3,!0),this.boss_gate_sign00.play("default"),this.sign_layer.addMultiple([this.boss_gate.back,this.boss_gate.back.mask,this.boss_gate.down,this.boss_gate.down.mask,this.boss_gate.up,this.boss_gate.up.mask,this.boss_gate.door,this.boss_gate.front,this.boss_gate_sign,this.boss_gate_sign00,this.boss_gate_sign_bloom])}},{key:"init_obstacle_layer",value:function(){this.obstacle_layer_pos=[],this.obstacles=[];for(var t=0;t<20;++t){var e=Math.random(),a=this.create_unique_value(1e4,this.sign_layer_pos);this.obstacle_layer_pos.push(a);var i=void 0;e>.5?(i=this.add.sprite(a,593.8,"Obstacle00")).scale.set(1.2):i=this.add.sprite(a,462,"Obstacle01"),this.physics.arcade.enable(i),i.body.immovable=!0,this.obstacles.push(i),this.obstacle_layer.add(i)}}},{key:"init_enemy_layer",value:function(){for(var t=0;t<4;++t)for(var e=0;e<this.game.total_enemies;++e){var a=this.create_unique_value(4e3,this.sign_layer_pos.concat(this.obstacle_layer_pos)),i=this.enemy_layer.create(a,t<2?150*Math.random()+500:600,"Enemy0"+t);i.anchor.set(.5),i.scale.set(1.2),i.angle=180*Math.random()}this.enemy_layer.setAll("body.gravity.y",300)}},{key:"init_front_layer",value:function(){this.front_layer.create(0,0,"Map01_Layer00"),this.front_layer.create(this.game.width,0,"Map01_Layer00")}},{key:"init_target_layer",value:function(){var t=this;this.target_large=this.add.sprite(0,0,"Target_Large00"),this.target_large.anchor.set(.5),this.add.tween(this.target_large.scale).to({x:.8,y:.8},4e3,Phaser.Easing.Linear.None).yoyo(!0).loop().start(),this.add.tween(this.target_large).to({angle:360},5e3).loop().start(),this.target_large.inputEnabled=!0,this.target_large.events.onInputDown.add(function(e,a){t.game.mouse.is_down||(t.game.mouse.is_down=!0,t.game.mouse.x=a.x,t.game.mouse.y=a.y,t.player.body.velocity.x=0,t.player.body.velocity.y=0,t.mouse_drag.alpha=1,t.player.body.gravity.y=t.player.body.gravity.y>0?25:-25)},this),this.target_large.events.onInputUp.add(function(e,a){t.game.total_life-=1,t.game.mouse.is_down=!1,t.game.time_angle=0,t.game.last_time=t.time.now;var i=t.game.mouse.x-a.x,s=t.game.mouse.y-a.y;t.player.body.velocity.x=i>0?Math.min(1e3,5*i):Math.max(-1e3,5*i),t.player.body.velocity.y=s>0?Math.min(1e3,5*s):Math.max(-1e3,5*s),t.mouse_drag.animations.play("fire").onComplete.add(function(){t.mouse_drag.frame=0,t.mouse_drag.alpha=0}),t.player.body.gravity.y=t.player.body.gravity.y>0?300:-300},this),this.boss_HP={front:this.add.sprite(.06*this.game.width,this.game.height-20,"HP_Front"),back:this.add.sprite(.06*this.game.width,this.game.height-20,"HP_Back")},this.boss_HP.front.anchor.set(0,.5),this.boss_HP.back.anchor.set(0,.5),this.boss_HP.front.mask=this.add.graphics(.06*this.game.width,this.game.height-20),this.boss_HP.front.mask.beginFill(16777215),this.boss_HP.front.mask.anchor.set(0,.5),this.boss_HP.front.mask.drawRect(0,-15,800,30),this.boss_HP.front.visible=!1,this.boss_HP.back.visible=!1,this.target_layer.addMultiple([this.target_large,this.boss_HP.back,this.boss_HP.front,this.boss_HP.front.mask])}},{key:"init_border_layer",value:function(){this.border_layer.enableBody=!0;for(var t=this.game.map1_boundary.left-400;t<this.game.map1_boundary.right;t+=900)this.border_layer.create(t,this.game.settings.border_bottom_offset_y,"Map01_Layer01"),this.border_layer.create(t,this.game.settings.border_top_offset_y,"Map01_Layer02");this.boundary_RH=this.add.sprite(this.game.map1_boundary.right,458,"Boundary"),this.boundary_LH=this.add.sprite(this.game.map1_boundary.left,458,"Boundary"),this.boundary_LH.scale.set(-1,1),this.border_layer.addMultiple([this.boundary_RH,this.boundary_LH]),this.border_layer.setAll("body.immovable",!0)}},{key:"init_main_layer",value:function(){this.gravity_0=this.add.sprite(.25*this.game.width,500,"Gravity00"),this.gravity_1=this.add.sprite(.75*this.game.width,700,"Gravity01"),this.physics.arcade.enable(this.gravity_0),this.physics.arcade.enable(this.gravity_1),this.gravity_0.anchor.set(.5),this.gravity_1.anchor.set(.5),this.gravity_0.body.setCircle(16),this.gravity_1.body.setCircle(16),this.gravity_0.body.immovable=!0,this.gravity_1.body.immovable=!0,this.gravity_0.animations.add("active",[0,1,2,3,4,5],10,!0),this.gravity_1.animations.add("active",[0,1,2,3,4,5],10,!0),this.mouse_drag=this.add.sprite(0,0,"Mouse_Drag"),this.mouse_drag.anchor.set(.5),this.mouse_drag.scale.set(.5),this.mouse_drag.animations.add("fire",[0,1,2,3,4,5],15,!1),this.mouse_drag.frame=0,this.mouse_drag.alpha=0,this.player=this.add.sprite(.5*this.game.width,500,"Player00"),this.physics.arcade.enable(this.player),this.player.is_touching=!1,this.player.body.bounce.set(.3),this.player.anchor.set(.5),this.player.angle=0,this.player.body.gravity.y=300,this.player.animations.add("leftwalk",[13,14,15,16,17,18],8,!0),this.player.animations.add("rightwalk",[19,20,21,22,23,24],8,!0),this.player.animations.add("leftjump",[1,2,3,4,5,6],10,!0),this.player.animations.add("rightjump",[7,8,9,10,11,12],10,!0),this.player.animations.add("leftrun",[25,26,27,28,29,30],8,!0),this.player.animations.add("rightrun",[31,32,33,34,35,36],8,!0),this.dbg=this.add.text(5,5,""),this.dbg.fontSize=20,this.dbg.fill="#000",this.main_layer.addMultiple([this.dbg,this.mouse_drag,this.player,this.gravity_0,this.gravity_1]),this.back_layer_0.create(0,0,"Map01_Layer03"),this.back_layer_0.create(this.game.width,0,"Map01_Layer03"),this.back_layer_1.create(0,0,"Map01_Layer04"),this.back_layer_1.create(this.game.width,0,"Map01_Layer04"),this.back_layer_2.create(0,0,"Map01_Layer05"),this.boss=this.add.sprite(.5*this.game.width,200,"Boss00"),this.physics.arcade.enable(this.boss),this.boss.body.setSize(150,200,125,100),this.boss.anchor.set(.5),this.boss.body.immovable=!0,this.boss.animations.add("walk",[0,1],3,!0),this.boss.animations.add("attack",[2,3,4],8,!1),this.boss.visible=!1,this.add.tween(this.boss).to({y:250},1e3).yoyo(!0).loop().start(),this.boss_layer.add(this.boss),this.boss.hp=100}},{key:"init_board",value:function(){this.board={Enemy00Ratio:{cover:this.add.sprite(.4*this.game.width,.075*this.game.height,"Enemy00"),text:this.add.text(.45*this.game.width,.05*this.game.height,"0%"),bar_back:this.add.sprite(.425*this.game.width,.075*this.game.height,"Percentage_Back"),bar_front:this.add.sprite(.425*this.game.width,.075*this.game.height,"Percentage_Front"),mask:this.add.graphics(.425*this.game.width,.075*this.game.height),total_clear:0},Enemy01Ratio:{cover:this.add.sprite(.7*this.game.width,.075*this.game.height,"Enemy01"),text:this.add.text(.75*this.game.width,.05*this.game.height,"0%"),bar_back:this.add.sprite(.725*this.game.width,.075*this.game.height,"Percentage_Back"),bar_front:this.add.sprite(.725*this.game.width,.075*this.game.height,"Percentage_Front"),mask:this.add.graphics(.725*this.game.width,.075*this.game.height),total_clear:0},Enemy02Ratio:{cover:this.add.sprite(.45*this.game.width,.145*this.game.height,"Enemy02"),text:this.add.text(.5*this.game.width,.12*this.game.height,"0%"),bar_back:this.add.sprite(.475*this.game.width,.145*this.game.height,"Percentage_Back"),bar_front:this.add.sprite(.475*this.game.width,.145*this.game.height,"Percentage_Front"),mask:this.add.graphics(.475*this.game.width,.145*this.game.height),total_clear:0},Enemy03Ratio:{cover:this.add.sprite(.75*this.game.width,.145*this.game.height,"Enemy03"),text:this.add.text(.8*this.game.width,.12*this.game.height,"0%"),bar_back:this.add.sprite(.775*this.game.width,.145*this.game.height,"Percentage_Back"),bar_front:this.add.sprite(.775*this.game.width,.145*this.game.height,"Percentage_Front"),mask:this.add.graphics(.775*this.game.width,.145*this.game.height),total_clear:0}};for(var t=0;t<this.game.settings.total_enemy_types;++t)this.board["Enemy0"+t+"Ratio"].cover.anchor.set(.5),this.board["Enemy0"+t+"Ratio"].text.anchor.set(.5),this.board["Enemy0"+t+"Ratio"].text.fontSize=20,this.board["Enemy0"+t+"Ratio"].text.fill="#fff",this.board["Enemy0"+t+"Ratio"].bar_back.anchor.set(0,.5),this.board["Enemy0"+t+"Ratio"].bar_front.anchor.set(0,.5),this.board["Enemy0"+t+"Ratio"].mask.anchor.set(0,.5),this.board["Enemy0"+t+"Ratio"].mask.beginFill(16777215),this.board["Enemy0"+t+"Ratio"].mask.drawRect(0,-20,150,40),this.board["Enemy0"+t+"Ratio"].bar_front.mask=this.board["Enemy0"+t+"Ratio"].mask;this.board.Enemy00Ratio.cover.animations.add("kill",[1,2,3,4,5],8,!1),this.board.Enemy01Ratio.cover.animations.add("kill",[0,1,2,3],8,!1),this.board.Enemy02Ratio.cover.animations.add("kill",[0,1,2,3,4],8,!1),this.board.Enemy03Ratio.cover.animations.add("kill",[0,1,2,3,4,5],8,!1),this.life_icon=this.add.image(.045*this.game.width,.035*this.game.height,"LifeIcon"),this.life_icon.anchor.set(.5),this.life_text=this.add.text(.12*this.game.width,.035*this.game.height,"x"+this.game.total_life),this.life_text.anchor.set(.5)}},{key:"check_duplicate",value:function(t,e){var a=!0,i=!1,s=void 0;try{for(var r,o=e[Symbol.iterator]();!(a=(r=o.next()).done);a=!0){var n=r.value;if(t>n-100&&t<n+100)return!0}}catch(t){i=!0,s=t}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return!1}},{key:"create_unique_value",value:function(t,e){var a=void 0;do{a=(Math.random()-.5)*t}while(this.check_duplicate(a,e));return a}},{key:"update",value:function(){var t=this,e=this.time.now;this.is_boss_state&&(0==this.game.mouse.is_down&&this.physics.arcade.collide(this.player,this.bullet_layer,function(t,e){return e.hit=!0}),this.physics.arcade.overlap(this.boss,this.bullet_layer,this.handle_boss_hit.bind(this)));var a=!0,i=!1,s=void 0;try{for(var r,o=this.enemy_layer.children[Symbol.iterator]();!(a=(r=o.next()).done);a=!0){var n=r.value;this.board["Enemy"+n.key.substring(5,7)+"Ratio"].total_clear>=this.game.total_enemies?this.physics.arcade.collide(this.player,n,this.handle_obstacle_hit.bind(this)):this.physics.arcade.overlap(this.player,n,this.handle_enemy_hit.bind(this))}}catch(t){i=!0,s=t}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}this.physics.arcade.collide(this.enemy_layer,[this.enemy_layer,this.border_layer,this.obstacle_layer,this.gravity_0,this.gravity_1]),this.physics.arcade.collide(this.player,[this.border_layer,this.obstacle_layer,this.main_layer],this.handle_gravity.bind(this)),this.physics.arcade.collide(this.player,this.boss_gate_sign,this.handle_sign.bind(this)),this.physics.arcade.overlap(this.player,this.boss_gate.door,this.handle_sign.bind(this));var h=this.math.angleBetween(this.input.activePointer.x,this.input.activePointer.y,this.player.body.position.x+this.player.offsetX,this.player.body.position.y+this.player.offsetY),l=Math.min(30,.25*this.math.distance(this.input.activePointer.x,this.input.activePointer.y,this.player.body.position.x+this.player.offsetX,this.player.body.position.y+this.player.offsetY));if(this.game.mouse.is_down&&this.input.activePointer.isDown&&(this.game.mouse.x<this.input.activePointer.x?this.player.animations.play(this.player.body.gravity.y<0?"rightjump":"leftjump"):this.player.animations.play(this.player.body.gravity.y<0?"leftjump":"rightjump"),this.mouse_drag.x=this.player.body.position.x+this.player.offsetX-Math.cos(h)*l*1.8,this.mouse_drag.y=this.player.body.position.y+this.player.offsetY-Math.sin(h)*l*1.8,this.mouse_drag.scale.set(.5*l*.1,Math.max(.05*l*.5,.5)),this.mouse_drag.rotation=h),this.game.mouse.is_down||(this.game.time_angle=this.game.time_angle>90?90:this.game.time_angle+5e-5*(this.game.last_time-e),this.game.last_time=e),this.target_large.x=this.player.body.position.x+this.player.offsetX,this.target_large.y=this.player.body.position.y+this.player.offsetY,this.player.body.x>this.game.settings.active_right_bounder&&this.boundary_RH.body.x>this.game.width-50){var y=!0,d=!1,c=void 0;try{for(var m,_=this.back_layer_0.children[Symbol.iterator]();!(y=(m=_.next()).done);y=!0){var g=m.value;g.x-=.01*this.player.body.velocity.x,g.x<-this.game.width&&(g.x+=2*this.game.width)}}catch(t){d=!0,c=t}finally{try{!y&&_.return&&_.return()}finally{if(d)throw c}}var p=!0,u=!1,b=void 0;try{for(var f,v=this.back_layer_1.children[Symbol.iterator]();!(p=(f=v.next()).done);p=!0){var x=f.value;x.x-=.005*this.player.body.velocity.x,x.x<-this.game.width&&(x.x+=2*this.game.width)}}catch(t){u=!0,b=t}finally{try{!p&&v.return&&v.return()}finally{if(u)throw b}}var w=!0,k=!1,P=void 0;try{for(var E,M=this.front_layer.children[Symbol.iterator]();!(w=(E=M.next()).done);w=!0){var O=E.value;O.x-=.02*this.player.body.velocity.x,O.x<-this.game.width&&(O.x+=2*this.game.width)}}catch(t){k=!0,P=t}finally{try{!w&&M.return&&M.return()}finally{if(k)throw P}}var R=!0,j=!1,S=void 0;try{for(var L,B=this.border_layer.children[Symbol.iterator]();!(R=(L=B.next()).done);R=!0){L.value.x-=.015*this.player.body.velocity.x}}catch(t){j=!0,S=t}finally{try{!R&&B.return&&B.return()}finally{if(j)throw S}}var T=!0,G=!1,C=void 0;try{for(var H,A=this.obstacle_layer.children[Symbol.iterator]();!(T=(H=A.next()).done);T=!0){H.value.x-=.01*this.player.body.velocity.x}}catch(t){G=!0,C=t}finally{try{!T&&A.return&&A.return()}finally{if(G)throw C}}if(this.is_boss_state)this.boss.body.x-=.01*this.player.body.velocity.x;else{var F=!0,D=!1,I=void 0;try{for(var X,Y=this.enemy_layer.children[Symbol.iterator]();!(F=(X=Y.next()).done);F=!0){X.value.x-=.01*this.player.body.velocity.x}}catch(t){D=!0,I=t}finally{try{!F&&Y.return&&Y.return()}finally{if(D)throw I}}var z=!0,N=!1,q=void 0;try{for(var J,U=this.sign_layer.children[Symbol.iterator]();!(z=(J=U.next()).done);z=!0){J.value.x-=.01*this.player.body.velocity.x}}catch(t){N=!0,q=t}finally{try{!z&&U.return&&U.return()}finally{if(N)throw q}}}if(this.gravity_0.x-=.01*this.player.body.velocity.x,this.gravity_1.x-=.01*this.player.body.velocity.x,this.player.body.x>this.game.settings.active_right_bounder&&(this.player.body.x=this.game.settings.active_right_bounder),this.is_boss_state&&(this.boss.move_effect&&this.boss.move_effect.isRunning&&(this.boss.move_effect.timeline[0].vEnd.x-=.01*this.player.body.velocity.x),this.bullets)){var W=!0,K=!1,Q=void 0;try{for(var V,Z=this.bullet_layer.children[Symbol.iterator]();!(W=(V=Z.next()).done);W=!0){V.value.x-=.01*this.player.body.velocity.x}}catch(t){K=!0,Q=t}finally{try{!W&&Z.return&&Z.return()}finally{if(K)throw Q}}}}else if(this.player.body.x<this.game.settings.active_left_bounder&&this.boundary_LH.body.x<-100){var $=!0,tt=!1,et=void 0;try{for(var at,it=this.back_layer_0.children[Symbol.iterator]();!($=(at=it.next()).done);$=!0){var st=at.value;st.x-=.01*this.player.body.velocity.x,st.x>this.game.width&&(st.x+=2*-this.game.width)}}catch(t){tt=!0,et=t}finally{try{!$&&it.return&&it.return()}finally{if(tt)throw et}}var rt=!0,ot=!1,nt=void 0;try{for(var ht,lt=this.back_layer_1.children[Symbol.iterator]();!(rt=(ht=lt.next()).done);rt=!0){var yt=ht.value;yt.x-=.005*this.player.body.velocity.x,yt.x>this.game.width&&(yt.x+=2*-this.game.width)}}catch(t){ot=!0,nt=t}finally{try{!rt&&lt.return&&lt.return()}finally{if(ot)throw nt}}var dt=!0,ct=!1,mt=void 0;try{for(var _t,gt=this.front_layer.children[Symbol.iterator]();!(dt=(_t=gt.next()).done);dt=!0){var pt=_t.value;pt.x-=.02*this.player.body.velocity.x,pt.x>this.game.width&&(pt.x+=2*-this.game.width)}}catch(t){ct=!0,mt=t}finally{try{!dt&&gt.return&&gt.return()}finally{if(ct)throw mt}}var ut=!0,bt=!1,ft=void 0;try{for(var vt,xt=this.border_layer.children[Symbol.iterator]();!(ut=(vt=xt.next()).done);ut=!0){vt.value.x-=.015*this.player.body.velocity.x}}catch(t){bt=!0,ft=t}finally{try{!ut&&xt.return&&xt.return()}finally{if(bt)throw ft}}var wt=!0,kt=!1,Pt=void 0;try{for(var Et,Mt=this.obstacle_layer.children[Symbol.iterator]();!(wt=(Et=Mt.next()).done);wt=!0){Et.value.x-=.01*this.player.body.velocity.x}}catch(t){kt=!0,Pt=t}finally{try{!wt&&Mt.return&&Mt.return()}finally{if(kt)throw Pt}}if(this.is_boss_state)this.boss.body.x-=.01*this.player.body.velocity.x;else{var Ot=!0,Rt=!1,jt=void 0;try{for(var St,Lt=this.enemy_layer.children[Symbol.iterator]();!(Ot=(St=Lt.next()).done);Ot=!0){St.value.x-=.01*this.player.body.velocity.x}}catch(t){Rt=!0,jt=t}finally{try{!Ot&&Lt.return&&Lt.return()}finally{if(Rt)throw jt}}var Bt=!0,Tt=!1,Gt=void 0;try{for(var Ct,Ht=this.sign_layer.children[Symbol.iterator]();!(Bt=(Ct=Ht.next()).done);Bt=!0){Ct.value.x-=.01*this.player.body.velocity.x}}catch(t){Tt=!0,Gt=t}finally{try{!Bt&&Ht.return&&Ht.return()}finally{if(Tt)throw Gt}}}if(this.gravity_0.x-=.01*this.player.body.velocity.x,this.gravity_1.x-=.01*this.player.body.velocity.x,this.player.body.x<this.game.settings.active_left_bounder&&(this.player.body.x=this.game.settings.active_left_bounder),this.is_boss_state&&(this.boss.move_effect&&this.boss.move_effect.isRunning&&(this.boss.move_effect.timeline[0].vEnd.x-=.01*this.player.body.velocity.x),this.bullets)){var At=!0,Ft=!1,Dt=void 0;try{for(var It,Xt=this.bullet_layer.children[Symbol.iterator]();!(At=(It=Xt.next()).done);At=!0){It.value.x-=.01*this.player.body.velocity.x}}catch(t){Ft=!0,Dt=t}finally{try{!At&&Xt.return&&Xt.return()}finally{if(Ft)throw Dt}}}}this.player.body.velocity.x<8&&this.player.body.velocity.x>-8&&(this.player.body.velocity.x=0),this.player.body.velocity.x<0?this.player.animations.play(this.player.body.gravity.y<0?"rightrun":"leftrun"):this.player.body.velocity.x>0?this.player.animations.play(this.player.body.gravity.y<0?"leftrun":"rightrun"):this.game.mouse.is_down||(this.player.frame=0,this.player.animations.stop()),this.player.body.gravity.y<0?(this.gravity_1.animations.play("active"),this.gravity_0.frame=0,this.gravity_0.animations.stop(),0==this.player.angle&&this.tween_down.start()):(this.gravity_0.animations.play("active"),this.gravity_1.frame=0,this.gravity_1.animations.stop(),0!=this.player.angle&&this.tween_up.start());for(var Yt=0;Yt<this.game.settings.total_enemy_types;++Yt){var zt=Math.min(this.board["Enemy0"+Yt+"Ratio"].total_clear,this.game.total_enemies)/this.game.total_enemies;this.board["Enemy0"+Yt+"Ratio"].text.text=Math.round(100*zt)+"%",this.board["Enemy0"+Yt+"Ratio"].text.x=this.board["Enemy0"+Yt+"Ratio"].cover.x+32.5+150*zt,this.board["Enemy0"+Yt+"Ratio"].mask.scale.set(zt,1)}this.is_boss_state&&(this.boss.hp<.01&&this.state.start("clear"),this.boss_HP.front.mask.scale.set(this.boss.hp/100,1),this.boss.last_time+8e3<e&&(this.player.x>this.boss.x?(this.boss.animations.play("walk"),this.boss.scale.set(-1,1)):(this.boss.animations.play("walk"),this.boss.scale.set(1,1)),this.boss.last_time=e,this.boss.move_effect&&(this.boss.move_effect.stop(),this.tweens.remove(this.boss.move_effect)),this.boss.move_effect=this.add.tween(this.boss).to({x:this.player.x},2e3).start(),this.boss.move_effect.onComplete.add(function(){if(t.tweens.remove(t.boss.move_effect),t.boss.animations.play("attack"),setTimeout(function(){t.boss.frame=2},1e3),0==t.bullets.length){var e=!0,a=!1,i=void 0;try{for(var s,r=t.bullet_layer.children[Symbol.iterator]();!(e=(s=r.next()).done);e=!0){s.value.destroy()}}catch(t){a=!0,i=t}finally{try{!e&&r.return&&r.return()}finally{if(a)throw i}}t.bullets.length=0}t.time.events.repeat(.75*Phaser.Timer.SECOND,3,function(){for(var e={0:t.add.sprite(t.boss.x+136,t.boss.y+52,"Enemy00"),1:t.add.sprite(t.boss.x+136,t.boss.y+52,"Enemy00"),2:t.add.sprite(t.boss.x+136,t.boss.y+52,"Enemy00")},a=0;a<3;++a)e[a].scale.set(1.5),t.physics.arcade.enable(e[a]),e[a].body.mass=.25,e[a].body.bounce.set(1),e[a].body.velocity.y=200,e[a].hit=!1;e[0].body.velocity.x=-50,e[1].body.velocity.x=0,e[2].body.velocity.x=50,t.bullet_layer.addMultiple([e[0],e[1],e[2]]);for(var i=0;i<3;++i)t.bullets.push(e[i]);e={0:t.add.sprite(t.boss.x-145,t.boss.y+52,"Enemy01"),1:t.add.sprite(t.boss.x-145,t.boss.y+52,"Enemy01"),2:t.add.sprite(t.boss.x-145,t.boss.y+52,"Enemy01")};for(var s=0;s<3;++s)e[s].scale.set(1.5),t.physics.arcade.enable(e[s]),e[s].body.mass=.25,e[s].body.bounce.set(1),e[s].body.velocity.y=250,e[s].hit=!1;e[0].body.velocity.x=-50,e[1].body.velocity.x=0,e[2].body.velocity.x=50,t.bullet_layer.addMultiple([e[0],e[1],e[2]]);for(var r=0;r<3;++r)t.bullets.push(e[r])},t),t.world.bringToTop(t.bullet_layer)}))),this.life_text.text="x"+this.game.total_life,this.dbg.text="FPS: "+this.time.fps+"\nCurrent Mouse: ("+this.input.activePointer.x+", "+this.input.activePointer.y+")\nLast Mouse: ("+this.game.mouse.x+", "+this.game.mouse.y+")\nCombo: "+this.counter.combo+"\n",this.player.body.touching.none&&(this.player.is_touching=!1)}},{key:"handle_gravity",value:function(t,e){"Gravity00"==e.key?(t.body.gravity.y=300,this.enemy_layer.setAll("body.gravity.y",300)):"Gravity01"==e.key&&(t.body.gravity.y=-300,this.enemy_layer.setAll("body.gravity.y",-300))}},{key:"handle_enemy_hit",value:function(t,e){var a=this;e.body.enable=!1,this.board[e.key+"Ratio"].cover.animations.play("kill");var i=this.add.tween(e.scale).to({x:1.75,y:1.75},175).start();i.onComplete.add(function(){a.counter.lastType==e.key?(a.counter.combo+=1,a.audio["melo0"+a.counter.combo%3].play()):(a.counter.combo=1,a.counter.lastType=e.key,a.audio.melo00.play()),a.tweens.remove(i);var t=a.counter.combo/5,s=a.add.emitter(e.x,e.y,t);s.gravity=0,s.makeParticles("Particle"+e.key.substring(5,7)),s.setXSpeed(-150,150),s.setYSpeed(-150,150),s.setScale(1,.5,1,.5,800),s.start(!0,800,null,t),a.destroy_emitter.add(s),a.enemy_layer.remove(e),e.destroy(),setTimeout(function(){s.forEach(function(t){var i=a.add.tween(t).to({x:a.board["Enemy"+e.key.substring(5,7)+"Ratio"].cover.x,y:a.board["Enemy"+e.key.substring(5,7)+"Ratio"].cover.y},400).start();i.onComplete.add(function(){a.tweens.remove(i)})})},200),setTimeout(function(){a.destroy_emitter.remove(s),s.destroy()},600)},this),this.board["Enemy"+e.key.substring(5,7)+"Ratio"].total_clear+=1,this.board["Enemy"+e.key.substring(5,7)+"Ratio"].total_clear>this.game.total_enemies-1&&this.enemy_layer.forEach(function(t){t.key===e.key&&(t.body.immovable=!0,t.body.moves=!1)})}},{key:"handle_obstacle_hit",value:function(t,e){t.is_touching||(this.game.total_life-=2,t.is_touching=!0),this.game.total_life<.1&&this.state.start("Over")}},{key:"handle_sign",value:function(t,e){var a=this;"Boss_Gate_Sign01"==e.key&&e.body.touching.up?(this.boss_gate_sign_bloom.bloom_effect.stop(),this.boss_gate_sign_bloom.destroy(),e.frame=1,e.body.enable=!1,this.boss_gate.front.visible=!0,this.camera.shake(.0035,800),this.boss_gate.up_effect.start(),this.boss_gate.down_effect.start(),this.boss_gate.back_effect.start(),this.boss_gate.up_effect.onComplete.add(function(){a.boss_gate.valid=!0,a.boss_gate.up.mask.destroy(),a.boss_gate.up.destroy(),a.boss_gate.down.mask.destroy(),a.boss_gate.down.destroy()}),this.boss_gate.front_effect.start()):this.boss_gate.valid&&"Boss_Gate00"==e.key&&(this.is_boss_state=!0,this.boss.visible=!0,this.boss.animations.play("walk"),this.enemy_layer.removeAll(),this.sign_layer.removeAll(),this.player.body.bounce.set(.8),this.boss_HP.front.visible=!0,this.boss_HP.back.visible=!0)}},{key:"handle_boss_hit",value:function(t,e){e.hit&&(t.hp-=10,e.destroy())}}]),e}();e.default=s},132:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}();var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Phaser.State),i(e,[{key:"create",value:function(){this.state.start("Stage2")}}]),e}();e.default=s},133:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}();var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Phaser.State),i(e,[{key:"preload",value:function(){this.load.baseURL="src/assets/",this.load.audio("melo00","audio/system00_melo00.wav"),this.load.audio("melo01","audio/system00_melo01.wav"),this.load.audio("melo02","audio/system00_melo02.wav"),this.load.audio("melo03","audio/system00_melo03.wav"),this.load.image("tileset","map/tileset.png"),this.load.tilemap("map","map/map.json",null,Phaser.Tilemap.TILED_JSON),this.load.image("Minimap_02","image/Minimap/Minimap_02.png"),this.load.image("Map01_Layer00","image/Map01/Map01_Layer00.png"),this.load.image("Map01_Layer01","image/Map01/Map01_Layer01.png"),this.load.image("Map01_Layer02","image/Map01/Map01_Layer02.png"),this.load.image("Map01_Layer03","image/Map01/Map01_Layer03.png"),this.load.image("Map01_Layer04","image/Map01/Map01_Layer04.png"),this.load.image("Map01_Layer05","image/Map01/Map01_Layer05.png"),this.load.image("Boundary","image/Map01/Boundary.png"),this.load.spritesheet("Map02_Layer0","image/Map02/Map02_Layer0.png",950,793),this.load.spritesheet("Map02_Layer1","image/Map02/Map02_Layer1.png",950,793),this.load.spritesheet("Map02_Layer2","image/Map02/Map02_Layer2.png",950,793),this.load.spritesheet("Map02_Layer3","image/Map02/Map02_Layer3.png",950,793),this.load.spritesheet("Map02_Layer4","image/Map02/Map02_Layer4.png",950,793),this.load.image("Particle00","image/Particle/Particle00.png"),this.load.image("Particle01","image/Particle/Particle01.png"),this.load.image("Particle02","image/Particle/Particle02.png"),this.load.image("Particle03","image/Particle/Particle03.png"),this.load.spritesheet("Mouse_Drag","image/Mouse_Drag.png",160,112),this.load.spritesheet("Player00","image/Player/Player00.png",45,45),this.load.spritesheet("Enemy00","image/Enemy/Enemy00.png",31,39),this.load.spritesheet("Enemy01","image/Enemy/Enemy01.png",45,44),this.load.spritesheet("Enemy02","image/Enemy/Enemy02.png",42,50),this.load.spritesheet("Enemy03","image/Enemy/Enemy03.png",40,46),this.load.spritesheet("Gravity00","image/Gravity/Gravity00.png",40,35),this.load.spritesheet("Gravity01","image/Gravity/Gravity01.png",40,35),this.load.image("Obstacle00","image/Obstacle/Obstacle00.png"),this.load.image("Obstacle01","image/Obstacle/Obstacle01.png"),this.load.image("Percentage_Back","image/Percentage/Percentage_Back.png"),this.load.image("Percentage_Front","image/Percentage/Percentage_Front.png"),this.load.image("Boss_Gate00","image/Boss_Gate/Boss_Gate00.png"),this.load.image("Boss_Gate01","image/Boss_Gate/Boss_Gate01.png"),this.load.image("Boss_Gate02","image/Boss_Gate/Boss_Gate02.png"),this.load.image("Boss_Gate03","image/Boss_Gate/Boss_Gate03.png"),this.load.image("Boss_Gate04","image/Boss_Gate/Boss_Gate04.png"),this.load.spritesheet("Boss_Gate_Sign00","image/Boss_Gate/Boss_Gate_Sign00.png",54,54),this.load.spritesheet("Boss_Gate_Sign01","image/Boss_Gate/Boss_Gate_Sign01.png",54,40),this.load.spritesheet("Boss00","image/Boss/Boss00.png",400,400),this.load.image("HP_Front","image/HP/HP_Front.png"),this.load.image("HP_Back","image/HP/HP_Back.png"),this.load.image("Target_Large00","image/Target/Target_Large00.png"),this.load.image("Target_Large01","image/Target/Target_Large01.png"),this.load.image("LifeIcon","image/Icon/LifeIcon.png"),this.load.image("favicon","image/Icon/favicon.png")}},{key:"create",value:function(){this.state.start("Menu")}}]),e}();e.default=s},134:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}();var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Phaser.State),i(e,[{key:"init",value:function(){this.game.settings={border_top_offset_y:195,border_top_y:277,border_bottom_offset_y:723,border_bottom_y:70,active_right_bounder:564,active_left_bounder:364,active_up_bounder:472,active_bottom_bounder:683,total_enemy_types:4},this.game.mouse={is_down:!1,x:0,y:0},this.game.map1_boundary={left:-5e3,right:5e3},this.game.total_enemies=25,this.game.time_angle=0,this.game.last_time=0,this.game.total_life=1e3,this.time.advancedTiming=!0}},{key:"create",value:function(){this.state.start("Load")}}]),e}();e.default=s},135:function(t,e,a){"use strict";var i=y(a(134)),s=y(a(133)),r=y(a(132)),o=y(a(131)),n=y(a(130)),h=y(a(129)),l=y(a(128));function y(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var y=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,a));return y.state.add("Boot",i.default),y.state.add("Load",s.default),y.state.add("Menu",r.default),y.state.add("Stage1",o.default),y.state.add("Stage2",n.default),y.state.add("Clear",h.default),y.state.add("Over",l.default),y.state.start("Boot"),y}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Phaser.Game),e}();window.onload=function(){new d(928,793)}},348:function(t,e,a){a(347),a(145),a(141),a(139),a(137),t.exports=a(135)}});